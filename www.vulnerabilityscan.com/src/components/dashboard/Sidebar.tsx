'use Client'
import Link from 'next/link'
import { usePathname } from 'next/navigation';

export default function SideBar({role} : {role: string}) {

  const pathname = usePathname()

  const links = [
    { href: '/dashboard/start-scan', label: 'Start Scan' },
    
    { href: '/dashboard/my-scans', label: 'Scan History' }

  ]

  const adminLinks = []

  if(role === 'Admin') {
    adminLinks.push(
      { href: '/dashboard/get-all-scans', label: 'All Scans' },
      { href: '/dashboard/manage-users', label: 'Manage Users' },
    );
  }
  
  return (
    <aside className='w-60 border-r p-3 space-y-1'>
      {links.map((link) => (
        <Link
          key={link.href}
          href={link.href}
          className={`block px-3 py-2 rounded text-sm
             ${pathname === link.href ? 'bg-gray-200 font-medium text-black' : 'hover:bg-gray-50 hover:text-black  '}`}
        >
          {link.label}
        </Link>
      ))}
      {adminLinks.length > 0 && (
        <>
          
          <hr className="my-2" />
          {adminLinks.map((link) => (
            <Link
              key={link.href}
              href={link.href}
              className={`block px-3 py-2 rounded text-sm
             ${pathname === link.href ? 'bg-gray-200 font-medium text-black' : 'hover:bg-gray-50 hover:text-black  '}`}
        >
          {link.label}
        </Link>
      ))}
        </>
      )}
    </aside>
  )



}
