{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nskar/OneDrive/Masa%C3%BCst%C3%BC/PeakCyber/VulnerabilityTestWebSite/www.vulnerabilityscan.com/src/api/axios.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport const api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:7095/api',\r\n  // withCredentials: false // cookie kullanmıyoruz\r\n});\r\n\r\n// Dev ortamında istek/yanıtları logla (isteğe bağlı)\r\nif (process.env.NODE_ENV === 'development') {\r\n  api.interceptors.request.use((cfg) => {\r\n    console.log('[HTTP] ->', cfg.method?.toUpperCase(), cfg.baseURL + cfg.url, cfg.data);\r\n    return cfg;\r\n  });\r\n  api.interceptors.response.use(\r\n    (res) => {\r\n      console.log('[HTTP] <-', res.status, res.statusText, res.data);\r\n      return res;\r\n    },\r\n    (err) => {\r\n      console.log('[HTTP] ERR', err);\r\n      return Promise.reject(err);\r\n    }\r\n  );\r\n}\r\n\r\n// Hata mesajını .NET ProblemDetails dahil düzgün çıkar\r\nexport function extractAxiosError(err: unknown): string {\r\n  if (axios.isAxiosError(err)) {\r\n    if (!err.response) return err.message || 'Network error (CORS/SSL olabilir)';\r\n    const { status, statusText, data } = err.response;\r\n    if (typeof data === 'string') return `${status} ${statusText} - ${data}`;\r\n    if (data?.detail || data?.title) return `${status} ${data.title || statusText}${data.detail ? `: ${data.detail}` : ''}`;\r\n    if (data?.errors) {\r\n      try {\r\n        const lines = Object.values<any>(data.errors).flat();\r\n        return `${status} ${statusText} - ${lines.join(' | ')}`;\r\n      } catch { /* no-op */ }\r\n    }\r\n    return `${status} ${statusText}`;\r\n  }\r\n  // unknown error\r\n  return (err as any)?.message || 'Unknown error';\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC9B,SAAS,iEAAwC;AAEnD;AAEA,qDAAqD;AACrD,wCAA4C;IAC1C,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC5B,QAAQ,GAAG,CAAC,aAAa,IAAI,MAAM,EAAE,eAAe,IAAI,OAAO,GAAG,IAAI,GAAG,EAAE,IAAI,IAAI;QACnF,OAAO;IACT;IACA,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC;QACC,QAAQ,GAAG,CAAC,aAAa,IAAI,MAAM,EAAE,IAAI,UAAU,EAAE,IAAI,IAAI;QAC7D,OAAO;IACT,GACA,CAAC;QACC,QAAQ,GAAG,CAAC,cAAc;QAC1B,OAAO,QAAQ,MAAM,CAAC;IACxB;AAEJ;AAGO,SAAS,kBAAkB,GAAY;IAC5C,IAAI,qIAAA,CAAA,UAAK,CAAC,YAAY,CAAC,MAAM;QAC3B,IAAI,CAAC,IAAI,QAAQ,EAAE,OAAO,IAAI,OAAO,IAAI;QACzC,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG,IAAI,QAAQ;QACjD,IAAI,OAAO,SAAS,UAAU,OAAO,GAAG,OAAO,CAAC,EAAE,WAAW,GAAG,EAAE,MAAM;QACxE,IAAI,MAAM,UAAU,MAAM,OAAO,OAAO,GAAG,OAAO,CAAC,EAAE,KAAK,KAAK,IAAI,aAAa,KAAK,MAAM,GAAG,CAAC,EAAE,EAAE,KAAK,MAAM,EAAE,GAAG,IAAI;QACvH,IAAI,MAAM,QAAQ;YAChB,IAAI;gBACF,MAAM,QAAQ,OAAO,MAAM,CAAM,KAAK,MAAM,EAAE,IAAI;gBAClD,OAAO,GAAG,OAAO,CAAC,EAAE,WAAW,GAAG,EAAE,MAAM,IAAI,CAAC,QAAQ;YACzD,EAAE,OAAM,CAAc;QACxB;QACA,OAAO,GAAG,OAAO,CAAC,EAAE,YAAY;IAClC;IACA,gBAAgB;IAChB,OAAO,AAAC,KAAa,WAAW;AAClC","debugId":null}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nskar/OneDrive/Masa%C3%BCst%C3%BC/PeakCyber/VulnerabilityTestWebSite/www.vulnerabilityscan.com/src/api/auth.ts"],"sourcesContent":["import { api, extractAxiosError } from './axios';\r\n\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:7095/api';\r\n\r\n\r\n//Login \r\n\r\n// export async function login(email : string, password : string){\r\n\r\n//   const response = await fetch(`${API_BASE}/User/login`, {\r\n//     method: 'POST',\r\n//     headers: {\r\n//       'Content-Type': 'application/json',\r\n//     },\r\n//     body: JSON.stringify({ email, password }),\r\n//   });\r\n\r\n//   if (!response.ok) {\r\n//     throw new Error(await response.text() || 'Login failed');\r\n//   }\r\n\r\n\r\n//   return response.json();\r\n// }\r\n\r\nexport async function login(email: string, password: string) {\r\n  try {\r\n    const { data } = await api.post('/User/login', { email, password });\r\n    return data; // { token }\r\n  } catch (e) {\r\n    throw new Error(extractAxiosError(e));\r\n  }\r\n}\r\n\r\n//Register\r\n\r\nexport async function register(email: string, password: string , username: string, ) {\r\n  const response = await fetch(`${API_BASE}/User/register`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    \r\n    body: JSON.stringify({ email, password, username }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error(await response.text() || 'Registration failed');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,WAAW,iEAAwC;AAuBlD,eAAe,MAAM,KAAa,EAAE,QAAgB;IACzD,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,mHAAA,CAAA,MAAG,CAAC,IAAI,CAAC,eAAe;YAAE;YAAO;QAAS;QACjE,OAAO,MAAM,YAAY;IAC3B,EAAE,OAAO,GAAG;QACV,MAAM,IAAI,MAAM,CAAA,GAAA,mHAAA,CAAA,oBAAiB,AAAD,EAAE;IACpC;AACF;AAIO,eAAe,SAAS,KAAa,EAAE,QAAgB,EAAG,QAAgB;IAC/E,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,cAAc,CAAC,EAAE;QACxD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QAEA,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;YAAU;QAAS;IACnD;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI,MAAM;IAC3C;IAEA,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nskar/OneDrive/Masa%C3%BCst%C3%BC/PeakCyber/VulnerabilityTestWebSite/www.vulnerabilityscan.com/src/app/%28auth%29/register/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { register } from \"@/api/auth\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function RegisterPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const passwordsMatch =\r\n    password.length > 0 &&\r\n    confirmPassword.length > 0 &&\r\n    password !== confirmPassword;\r\n\r\n  const isFormValid =\r\n    !loading && !!email && !!username && !!password && !passwordsMatch;\r\n\r\n  const onSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n\r\n    if (!isFormValid) {\r\n      setError(\"Please fill in all fields correctly\");\r\n      return;\r\n    }\r\n    if (password.length < 4) {\r\n      setError(\"Password must be at least 4 characters long\");\r\n\r\n      setLoading(true);\r\n\r\n      try {\r\n        await register(email.trim(), password.trim(), username.trim());\r\n        router.replace(\"/login\");\r\n      } catch (e: any) {\r\n        setError(e.message || \"Registration failed\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"min-h-screen grid place-items-center p-6\">\r\n      <form onSubmit={onSubmit} className=\"w-full max-w-sm space-y-3\">\r\n        <h1 className=\"text-2xl font-semibold\">Register</h1>\r\n\r\n        <input\r\n          className=\"w-full border rounded p-2\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          autoComplete=\"email\"\r\n          required\r\n        />\r\n\r\n        <input\r\n          className=\"w-full border rounded p-2\"\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          autoComplete=\"username\"\r\n          required\r\n        />\r\n\r\n        <input\r\n          className=\"w-full border rounded p-2\"\r\n          type=\"password\"\r\n          placeholder=\"Password (min 4 chars)\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          autoComplete=\"new-password\"\r\n          required\r\n          minLength={4}\r\n        />\r\n\r\n        <input\r\n          className=\"w-full border rounded p-2\"\r\n          type=\"password\"\r\n          placeholder=\"Confirm password\"\r\n          value={confirmPassword}\r\n          onChange={(e) => setConfirmPassword(e.target.value)}\r\n          autoComplete=\"new-password\"\r\n          required\r\n          aria-invalid={passwordsMatch}\r\n          aria-describedby={passwordsMatch ? \"pw-mismatch\" : undefined}\r\n        />\r\n\r\n        {passwordsMatch && (\r\n          <p id=\"pw-mismatch\" className=\"text-red-600 text-sm\">\r\n            Passwords do not match\r\n          </p>\r\n        )}\r\n\r\n        {error && (\r\n          <p className=\"text-red-600 text-sm whitespace-pre-wrap\">{error}</p>\r\n        )}\r\n\r\n        <button className=\"w-full rounded p-2 border\" disabled={!isFormValid}>\r\n          {loading ? \"Registering...\" : \"Register\"}\r\n        </button>\r\n        <p className=\"text-sm\">\r\n          Already have an account? <a className=\"underline\" href=\"/login\">Login</a>\r\n        </p>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,iBACJ,SAAS,MAAM,GAAG,KAClB,gBAAgB,MAAM,GAAG,KACzB,aAAa;IAEf,MAAM,cACJ,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,CAAC,YAAY,CAAC;IAEtD,MAAM,WAAW,OAAO;QACtB,EAAE,cAAc;QAChB,SAAS;QAET,IAAI,CAAC,aAAa;YAChB,SAAS;YACT;QACF;QACA,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,SAAS;YAET,WAAW;YAEX,IAAI;gBACF,MAAM,CAAA,GAAA,kHAAA,CAAA,WAAQ,AAAD,EAAE,MAAM,IAAI,IAAI,SAAS,IAAI,IAAI,SAAS,IAAI;gBAC3D,OAAO,OAAO,CAAC;YACjB,EAAE,OAAO,GAAQ;gBACf,SAAS,EAAE,OAAO,IAAI;YACxB,SAAU;gBACR,WAAW;YACb;QACF;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAK,UAAU;YAAU,WAAU;;8BAClC,8OAAC;oBAAG,WAAU;8BAAyB;;;;;;8BAEvC,8OAAC;oBACC,WAAU;oBACV,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,cAAa;oBACb,QAAQ;;;;;;8BAGV,8OAAC;oBACC,WAAU;oBACV,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,cAAa;oBACb,QAAQ;;;;;;8BAGV,8OAAC;oBACC,WAAU;oBACV,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,cAAa;oBACb,QAAQ;oBACR,WAAW;;;;;;8BAGb,8OAAC;oBACC,WAAU;oBACV,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;oBAClD,cAAa;oBACb,QAAQ;oBACR,gBAAc;oBACd,oBAAkB,iBAAiB,gBAAgB;;;;;;gBAGpD,gCACC,8OAAC;oBAAE,IAAG;oBAAc,WAAU;8BAAuB;;;;;;gBAKtD,uBACC,8OAAC;oBAAE,WAAU;8BAA4C;;;;;;8BAG3D,8OAAC;oBAAO,WAAU;oBAA4B,UAAU,CAAC;8BACtD,UAAU,mBAAmB;;;;;;8BAEhC,8OAAC;oBAAE,WAAU;;wBAAU;sCACI,8OAAC;4BAAE,WAAU;4BAAY,MAAK;sCAAS;;;;;;;;;;;;;;;;;;;;;;;AAK1E","debugId":null}}]
}